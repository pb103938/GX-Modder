<!doctype html>
<html>
  <head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7224168871546775"
     crossorigin="anonymous"></script>
    <link rel="icon" href="static/icon.png" type="image/png">
    <title>New Main Page</title>
    <meta name="description" content="Make Opera GX mods with ease!">
    <link rel="stylesheet" href="static/style.css">
    <meta property="og:title" content="New Main Page">
    <meta property="og:description" content="Make Opera GX mods with ease!">
    <meta property="og:image" content="/static/embed/Website Banner.png">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://opera.makeamod.com">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
      window.addEventListener("DOMContentLoaded", function() {
        let lph = document.getElementById("lph");
        if (lph.value === '') {
          lph.value = 352; // Set the default value to 5
        }
        let lps = document.getElementById("lps");
        if (lps.value === '') {
          lps.value = 90; // Set the default value to 5
        }
        let lpl = document.getElementById("lpl");
        if (lpl.value === '') {
          lpl.value = 54; // Set the default value to 5
        }
        let lah = document.getElementById("lah");
        if (lah.value === '') {
          lah.value = 254; // Set the default value to 5
        }
        let las = document.getElementById("las");
        if (las.value === '') {
          las.value = 35; // Set the default value to 5
        }
        let lal = document.getElementById("lal");
        if (lal.value === '') {
          lal.value = 12; // Set the default value to 5
        }
        let dph = document.getElementById("dph");
        if (dph.value === '') {
          dph.value = 352; // Set the default value to 5
        }
        let dps = document.getElementById("dps");
        if (dps.value === '') {
          dps.value = 90; // Set the default value to 5
        }
        let dpl = document.getElementById("dpl");
        if (dpl.value === '') {
          dpl.value = 54; // Set the default value to 5
        }
        let dah = document.getElementById("dah");
        if (dah.value === '') {
          dah.value = 254; // Set the default value to 5
        }
        let das = document.getElementById("das");
        if (das.value === '') {
          das.value = 35; // Set the default value to 5
        }
        let dal = document.getElementById("dal");
        if (dal.value === '') {
          dal.value = 12; // Set the default value to 5
        }
      });
    </script>
</head>
  <body>
    <script>
    function headers() {
    fetch('/static/header-footer.html') // Replace 'path/to/other/file.html' with the actual path to your other HTML file.
      .then(response => response.text())
      .then(html => {
        // Create a temporary container element to hold the fetched content.
        const tempContainer = document.createElement('div');
        tempContainer.innerHTML = html;
  
        // Find the element you want to clone inside the temporary container.
        const sourceElement = tempContainer.querySelector('#header');
  
        if (sourceElement) {
          // Clone the element and its children.
          const clonedElement = sourceElement.cloneNode(true);
  
          // Insert the cloned element into the destination element.
          const destinationElement = document.getElementById('pageHeader');
          destinationElement.appendChild(clonedElement);
        }
      })
      .catch(error => {
        console.error('Error fetching the file:', error);
      });
    };
    
    function footers() {
    fetch('/static/header-footer.html') // Replace 'path/to/other/file.html' with the actual path to your other HTML file.
      .then(response => response.text())
      .then(html => {
        // Create a temporary container element to hold the fetched content.
        const tempContainer = document.createElement('div');
        tempContainer.innerHTML = html;
  
        // Find the element you want to clone inside the temporary container.
        const sourceElement = tempContainer.querySelector('#footer');
  
        if (sourceElement) {
          // Clone the element and its children.
          const clonedElement = sourceElement.cloneNode(true);
  
          // Insert the cloned element into the destination element.
          const destinationElement = document.getElementById('pageFooter');
          destinationElement.appendChild(clonedElement);
        }
      })
      .catch(error => {
        console.error('Error fetching the file:', error);
      });
    };

    headers();
    footers();
    
    </script>
    <div id="pageHeader"></div>
    <div style="position:  relative; margin-top: 82px;"></div>
    <form method="POST" enctype="multipart/form-data">
        <div class="catContainer">
            <div class="catList">
                <ul>
                    <li>
                        <div style="margin: 5%;"><br></div>
                        <div style="color: rgb(0, 89, 255); font-size: 20px;;">Categories</div>
                        <div style="margin: 5%;"><br></div>
                        <div class="catHolder">
                            <div class="category" onclick="displayBox('KeyboardSounds', this)">
                                <div class="textBox">Keyboard Sounds</div>
                            </div>
                        </div>
                        <div style="margin: 5%;"><br></div>
                        <div class="category" onclick="displayBox('BackgroundMusic', this)">
                            <div class="textBox">Background Music</div>
                        </div>
                        <div style="margin: 5%;"><br></div>
                        <div class="category" onclick="displayBox('BrowserSounds', this)">
                            <div class="textBox">Browser Sounds</div>
                        </div>
                        <div style="margin: 5%;"><br></div>
                        <div class="category" onclick="displayBox('Wallpapers', this)">
                            <div class="textBox">Wallpapers</div>
                        </div>
                        <div style="margin: 5%;"><br></div>
                        <div class="category" onclick="displayBox('ModInfo', this)">
                            <div class="textBox" style="display: flex;">Mod Info <div style="color: red; margin-left: 8px;">(REQUIRED)</div></div>
                        </div>
                        <div style="margin-top: 20%;"><br></div>
                        <input class="downlink__button" style="margin-right: 20px;" type="submit" value="Download Mod" name="generateMod"> <button class="downlink__button" type="submit" value="Test Mod" name="testButton">Test Mod</button>
                        <div style="margin-top: 30%;"><br></div>
                        <br>
                        <br>
                    </li>
                </ul>
            </div>
            <div style="width: 80%; display: flex; justify-content: center; align-items: center;" id="modBox">
                <div style="color: white; font-size: 50px;">Select a category to start modding!</div>
            </div>
        </div>
    </form>

    <!-- The Modal Overlay -->
    <div id="modalOverlay" class="modal-overlay"></div>

    <!-- The Modal -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <label for="fileTypeSelect">Choose a file type:</label>
            <select id="fileTypeSelect" onchange="handleFileTypeChange()">
                <option value="">Select...</option>
                <option value="a">a</option>
                <option value="b">b</option>
                <option value="c">c</option>
                <option value="d">d</option>
                <option value="e">e</option>
            </select>
            <input type="file" id="fileInput" disabled>
            <button type="button" id="uploadBtn" onclick="uploadFile()" disabled>Upload</button>
        </div>
    </div>

    <script>
      let activeCategory = null;
      let categoryFiles = {
          KeyboardSounds: [],
          BackgroundMusic: [],
          BrowserSounds: [],
          Wallpapers: [],
          ModInfo: []
      };
      let currentCategory = '';
      let modal = document.getElementById("myModal");
      let modalOverlay = document.getElementById("modalOverlay");
      let fileInput = document.getElementById("fileInput");
      let uploadBtn = document.getElementById("uploadBtn");

      function displayBox(category, element) {
          // Prevent changing categories when modal is open
          if (modal.style.display === "block") return;

          var content = document.getElementById('modBox');
          currentCategory = category;

          if (activeCategory === element) {
              content.innerHTML = '<div class="message" style="color: white; font-size: 50px;">Select a category to start modding!</div>';
              element.classList.remove('active');
              activeCategory = null;
          } else {
              var xhr = new XMLHttpRequest();
              xhr.open('GET', '/static/categories.html', true);
              xhr.onreadystatechange = function () {
                  if (xhr.readyState === 4 && xhr.status === 200) {
                      var tempDiv = document.createElement('div');
                      tempDiv.innerHTML = xhr.responseText;
                      var newContent = tempDiv.querySelector('#' + category);
                      content.innerHTML = newContent ? newContent.innerHTML : '<div class="message">No content available</div>';
                      displayUploadedFiles(category);  // Display files for the selected category
                  }
              };
              xhr.send();

              if (activeCategory) {
                  activeCategory.classList.remove('active');
              }
              element.classList.add('active');
              activeCategory = element;
          }
      }

      function displayUploadedFiles(category) {
          const uploadsDiv = document.getElementById(`${category}Uploads`);
          uploadsDiv.innerHTML = '';

          categoryFiles[category].forEach((file, index) => {
              const fileDiv = document.createElement('div');
              fileDiv.innerHTML = `<span>${file.name}</span> <button type="button" onclick="removeFile('${category}', ${index})">Remove</button>`;
              uploadsDiv.appendChild(fileDiv);
          });
      }

      function addFileInput(category) {
          currentCategory = category;
          modal.style.display = "block";
          modalOverlay.style.display = "block";
      }

      function handleFileTypeChange() {
          const select = document.getElementById('fileTypeSelect');
          const fileType = select.value;

          fileInput.value = ''; // Clear previous file input
          fileInput.disabled = false;
          uploadBtn.disabled = false;

          if (currentCategory === 'KeyboardSounds' && fileType === 'a') {
              fileInput.accept = '.wav';
          } else if ((currentCategory === 'BackgroundMusic' || currentCategory === 'BrowserSounds') && fileType === 'a') {
              fileInput.accept = '.mp3';
          } else if (currentCategory === 'Wallpapers') {
              if (fileType === 'a' || fileType === 'c') {
                  fileInput.accept = '.png';
              } else if (fileType === 'b' || fileType === 'd') {
                  fileInput.accept = '.webm';
              }
          } else if (currentCategory === 'ModInfo') {
              if (fileType === 'a') {
                  fileInput.accept = '.txt';
              } else if (fileType === 'b') {
                  fileInput.accept = '.png';
              }
          } else {
              fileInput.disabled = true;
              uploadBtn.disabled = true;
          }
      }

      function uploadFile() {
          const file = fileInput.files[0];
          if (file) {
              categoryFiles[currentCategory].push(file);
              displayUploadedFiles(currentCategory);
              closeModal();
          }
      }

      function removeFile(category, index) {
          categoryFiles[category].splice(index, 1);
          displayUploadedFiles(category);
      }

      function closeModal() {
          modal.style.display = "none";
          modalOverlay.style.display = "none";
          document.getElementById('fileTypeSelect').value = '';
          fileInput.value = '';
          fileInput.disabled = true;
          uploadBtn.disabled = true;
      }

      // Close the modal when the user clicks on <span> (x)
      document.querySelector('.close').onclick = closeModal;

      // Close the modal when the user clicks anywhere outside of the modal content
      window.onclick = function(event) {
          if (event.target === modalOverlay) {
              closeModal();
          }
      }
    </script>
    <div id="pageFooter"></div>
  </body>
</html>